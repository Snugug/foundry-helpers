{"_id":"2Ort5sUA8JdtQCpB","name":"Poison","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/poison-bottle.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  Tagger.addTags(c, ['ase-detect', 'poison']);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_cqcikbzb307"}}}
{"_id":"3zZgR9mgBgSuIu0P","name":"Magic School","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/rolling-energy.svg","scope":"global","command":"game.SnugugsLittleHelpers.api.spellSchoolDialog.render(true);","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_cqcikbzb307"}}}
{"name":"#[CF_tempEntity]","type":"chat","author":"2s5Advq4xnKbUpbI","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"cf":{"id":"temp_cqcikbzb307","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"ASE Detection Setup","children":[],"icon":""}},"_id":"5p6W0juqDSdZkENl"}
{"_id":"6nBFOc3AeELmT7QS","name":"Add Stacked Conditions","type":"script","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"// Set up stacked conditions\ngame.SnugugsLittleHelpers\n  .applyCondition('Immobile')\n  .to([\n    'Paralyzed',\n    'Petrified',\n    'Stunned',\n    'Exhaustion 5',\n    'Grappled',\n    'Restrained',\n    'Unconscious',\n  ]);\n\ngame.SnugugsLittleHelpers\n  .applyCondition('Incapacitated')\n  .to([\n    'Paralyzed',\n    'Petrified',\n    'Stunned',\n    'Unconscious',\n  ]);","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.d4aFOKE2b6UkLmBC"},"cf":{"id":"temp_odxhesr2hu"}}}
{"_id":"8hC63OyskyQqC0iI","name":"#[CF_tempEntity]","type":"chat","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"cf":{"id":"temp_i4354fhwfaf","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Moulinette Macros","children":[],"icon":""}}}
{"_id":"Nzh7pMpm5TIDSCVC","name":"Add Moulinette Sources","type":"script","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"// See https://github.com/SvenWerlen/moulinette-core/tree/main/docs for full documentation\n\n// Possible sources:\n// User Data => data\n// Core Data => public\n// The Bazaar => forge-bazaar\n// My Asset Library => forgevtt\n\n// Possible types:\n// images\n// tokens\n// sounds\n\nconst sources = [\n  {\n    publisher: 'Systems',\n    pack: 'DnD 5e Icons',\n    type: 'images',\n    source: 'data',\n    path: 'systems/dnd5e/icons'\n  },\n];\n\n// Do the awesome stuff!\nif (game.moulinette) {\n  // Filter out custom sources from existing Moulinette indexes\n  const customSources = sources.map((s) => s.path);\n  game.moulinette.sources = game.moulinette.sources.filter((s) => !customSources.includes(s.path));\n\n  // Add all custom sources back to Moulinette\n  game.moulinette.sources = game.moulinette.sources.concat(sources).flat();\n  ui.notifications.info('Sources added!');\n}","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"cf":{"id":"temp_i4354fhwfaf"},"advanced-macros":{"runAsGM":false}}}
{"_id":"PkUQ4C0IodXx5PlL","name":"Disease","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/virus.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  Tagger.addTags(c, ['ase-detect', 'disease']);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_cqcikbzb307"}}}
{"_id":"W4GFGet35gZtXERf","name":"#[CF_tempEntity]","type":"chat","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"cf":{"id":"temp_0hlroutcj0tl","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Active Tile Macros","children":[],"icon":""}}}
{"_id":"Wl6D0IlVflZ3WVfD","name":"Desecrate","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/dripping-star.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  \n  if (Tagger.hasTags(c, 'good')) {\n    Tagger.removeTags(c, 'good');\n  }\n\n  setTimeout(() => {\n    if (Tagger.hasTags(c, 'consecrated')) {\n      Tagger.removeTags(c, 'consecrated');\n    }\n\n    setTimeout(() => {\n      Tagger.addTags(c, ['ase-detect', 'evil', 'desecrated']);\n    }, 100);\n  }, 100);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_cqcikbzb307"}}}
{"_id":"cHBba0UXQMkvbCSK","name":"#[CF_tempEntity]","type":"chat","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"cf":{"id":"temp_odxhesr2hu","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Combat Utility Belt Macros","children":[],"icon":""}}}
{"_id":"cS5AWi2c7fmkKSHr","name":"Reset Stacked Conditions","type":"script","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"game.SnugugsLittleHelpers.resetStackedConditions()","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.RMt7ojIAc6MKFsyw"},"cf":{"id":"temp_odxhesr2hu"}}}
{"_id":"dxYb9XKLDivdrV6M","name":"Tiered Difficulty Check","type":"script","author":"iFx5GYPtMbNPrxol","img":"icons/svg/dice-target.svg","scope":"global","command":"/**\n * Tiered Difficulty Check\n * @param {string[]} options - Arguments to the macro to determine anchors. Allowed values are:\n *   - x - A single number\n *   - x-y - A range where the number is greater to or equal to x and less than or equal to y\n *   - <x - Any number less than x\n *   - <=x - Any number less than or equal to x\n *   - >x - Any number greater than x\n *   - >=x - Any number greater than or equal to x\n *   - crit-success|crit(ical) - Roll the highest die face\n *   - crit(ical)-fail(ure)|fumble - Roll the lowest die face\n * Example input:\n *   >=18 >15 10-15 crit fumble\n *   This will create the following anchors:\n *     check >= 18  - All tokens that rolled an 18 or higher\n *     check > 15   - All tokens that rolled higher than a 15\n *     check 10-15  - All tokens that rolled a 10 or higher, but less than or equal to 15\n *     check crit   - All tokens that rolled the highest die face\n *     check fumble - All tokens that rolled the lowest die face\n */\nconst results = arguments[0].value.tokenresults;\nconst options = arguments[0].args;\n\n// Associate tokens with their rolls\nconst actors = await Promise.all(\n  results.map(async (r) => ({\n    roll: {\n      total: r.roll.total,\n      dice: r.roll.terms[0].results.find((r) => r.active)?.result,\n      options: r.roll.terms[0].options,\n    },\n    token: await fromUuid(r.uuid),\n  })),\n);\n\n// Determine anchors for each token\nconst goto = options\n  .map((opt) => {\n    // If it's a number, use it directly\n    const r = {\n      anchor: opt,\n    };\n\n    if (!isNaN(opt) || /^\\d+$/.test(opt)) {\n      r.min = parseInt(opt);\n      r.max = parseInt(opt) + 1;\n    } else if (/^\\d+-\\d+$/.test(opt)) {\n      const [min, max] = opt.split('-');\n      r.min = parseInt(min);\n      r.max = parseInt(max) + 1;\n    } else if (/^<\\d+$/.test(opt)) {\n      r.min = -Infinity;\n      r.max = parseInt(opt.slice(1));\n    } else if (/^>\\d+$/.test(opt)) {\n      r.min = parseInt(opt.slice(1)) + 1;\n      r.max = Infinity;\n    } else if (/^<=\\d+$/.test(opt)) {\n      r.min = -Infinity;\n      r.max = parseInt(opt.slice(2)) + 1;\n    } else if (/^>=\\d+$/.test(opt)) {\n      r.min = parseInt(opt.slice(2));\n      r.max = Infinity;\n    } else if (/^crit(ical)?(-success)?$/.test(opt)) {\n      r.option = 'critical';\n    } else if (/^(crit(ical)?-fail(ure)?|fumble)$/.test(opt)) {\n      r.option = 'fumble';\n    } else {\n      return null;\n    }\n\n    return r;\n  })\n  .filter((r) => r)\n  .map((range) => ({\n    tag: `check ${range.anchor}`,\n    tokens: actors\n      .filter((a) => {\n        if (range.option) {\n          return a.roll.options[range.option] === a.roll.dice;\n        } else {\n          return a.roll.total >= range.min && a.roll.total < range.max;\n        }\n      })\n      .map((a) => a.token),\n  }))\n  .filter((r) => r.tokens.length);\n\nreturn { goto };","folder":null,"sort":0,"permission":{"default":0,"iFx5GYPtMbNPrxol":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.dxYb9XKLDivdrV6M"},"cf":{"id":"temp_0hlroutcj0tl"},"advanced-macros":{"runAsGM":true}}}
{"_id":"ktqx4dKsSl55bQPZ","name":"Consecrate","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/holy-water.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  \n  if (Tagger.hasTags(c, 'evil')) {\n    Tagger.removeTags(c, 'evil');\n  }\n\n  setTimeout(() => {\n    if (Tagger.hasTags(c, 'desecrated')) {\n      Tagger.removeTags(c, 'desecrated');\n    }\n\n    setTimeout(() => {\n      Tagger.addTags(c, ['ase-detect', 'good', 'consecrated']);\n    }, 100);\n  }, 100);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_cqcikbzb307"}}}
{"_id":"ktqx4dKsSl55bQPZ","name":"Consecrate","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/holy-water.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  \n  if (Tagger.hasTags(c, 'evil')) {\n    Tagger.removeTags(c, 'evil');\n  }\n\n  setTimeout(() => {\n    if (Tagger.hasTags(c, 'desecrated')) {\n      Tagger.removeTags(c, 'desecrated');\n    }\n\n    setTimeout(() => {\n      Tagger.addTags(c, ['ase-detect', 'good', 'consecrated']);\n    }, 100);\n  }, 100);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_8iw0qqeq2fp","path":"ASE Status","color":"#000000"}}}
{"_id":"Wl6D0IlVflZ3WVfD","name":"Desecrate","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/dripping-star.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  \n  if (Tagger.hasTags(c, 'good')) {\n    Tagger.removeTags(c, 'good');\n  }\n\n  setTimeout(() => {\n    if (Tagger.hasTags(c, 'consecrated')) {\n      Tagger.removeTags(c, 'consecrated');\n    }\n\n    setTimeout(() => {\n      Tagger.addTags(c, ['ase-detect', 'evil', 'desecrated']);\n    }, 100);\n  }, 100);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_8iw0qqeq2fp","path":"ASE Status","color":"#000000"}}}
{"_id":"PkUQ4C0IodXx5PlL","name":"Disease","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/virus.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  Tagger.addTags(c, ['ase-detect', 'disease']);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_8iw0qqeq2fp","path":"ASE Status","color":"#000000"}}}
{"_id":"2Ort5sUA8JdtQCpB","name":"Poison","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/poison-bottle.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  Tagger.addTags(c, ['ase-detect', 'poison']);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_8iw0qqeq2fp","path":"ASE Status","color":"#000000"}}}
{"_id":"2Ort5sUA8JdtQCpB","name":"Poison","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/poison-bottle.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  Tagger.addTags(c, ['ase-detect', 'poison']);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_cqcikbzb307","path":"ASE Status","color":"#000000"}}}
{"_id":"PkUQ4C0IodXx5PlL","name":"Disease","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/virus.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  Tagger.addTags(c, ['ase-detect', 'disease']);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_cqcikbzb307","path":"ASE Status","color":"#000000"}}}
{"_id":"Wl6D0IlVflZ3WVfD","name":"Desecrate","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/dripping-star.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  \n  if (Tagger.hasTags(c, 'good')) {\n    Tagger.removeTags(c, 'good');\n  }\n\n  setTimeout(() => {\n    if (Tagger.hasTags(c, 'consecrated')) {\n      Tagger.removeTags(c, 'consecrated');\n    }\n\n    setTimeout(() => {\n      Tagger.addTags(c, ['ase-detect', 'evil', 'desecrated']);\n    }, 100);\n  }, 100);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_cqcikbzb307","path":"ASE Status","color":"#000000"}}}
{"_id":"ktqx4dKsSl55bQPZ","name":"Consecrate","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/holy-water.svg","scope":"global","command":"const controlled = Object.values(canvas.activeLayer._controlled);\n\nfor (const c of controlled) {\n  \n  if (Tagger.hasTags(c, 'evil')) {\n    Tagger.removeTags(c, 'evil');\n  }\n\n  setTimeout(() => {\n    if (Tagger.hasTags(c, 'desecrated')) {\n      Tagger.removeTags(c, 'desecrated');\n    }\n\n    setTimeout(() => {\n      Tagger.addTags(c, ['ase-detect', 'good', 'consecrated']);\n    }, 100);\n  }, 100);\n}","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_cqcikbzb307","path":"ASE Status","color":"#000000"}}}
{"_id":"3zZgR9mgBgSuIu0P","name":"Set Detectable Magic","type":"script","author":"2s5Advq4xnKbUpbI","img":"modules/snugugs-little-helpers/images/rolling-energy.svg","scope":"global","command":"game.SnugugsLittleHelpers.api.spellSchoolDialog.render(true);","folder":null,"sort":0,"permission":{"default":0,"2s5Advq4xnKbUpbI":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.ktqx4dKsSl55bQPZ"},"cf":{"id":"temp_cqcikbzb307"}}}
